<#include "/common/head.html">
<#include "/common/bodyStart.html">
<div class="layui-layout layui-layout-admin">
    <#include "/common/headContent.html">
    <#include "/common/left.html">
    <div class="layui-body">
        <div style="padding: 15px;">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>
                    数据统计
                </legend>
            </fieldset>
            <blockquote class="layui-elem-quote">
                <div class="layui-form" lay-filter="one">
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">数据时段</label>
                            <div class="layui-input-inline">
                                <input type="text" name="dateStr" id="dateStr" placeholder=" ~ " readonly="" class="layui-input" />
                            </div>
                        </div>
                        <div class="layui-inline">
                            <button type="button" class="layui-btn layui-btn-normal" id="checkAgain" data-type="checkAgain">重新检查时间范围内数据包</button>
                        </div>
                    </div>
                </div>
            </blockquote>
            <div class="layui-row">
                <div id="main" class="layui-col-md6" style="height: 400px;">
                    <!--<div class="grid-demo grid-demo-bg1">50%</div>-->
                </div>
                <div class="layui-col-md6">
                    <div class="grid-demo">50%</div>
                </div>
            </div>
        </div>
    </div>
    <#include "/common/footer.html">
</div>
<#include "/common/js.html">
<script src="${base}/resources/js/echarts.js"></script>
<!-- 自定义 js -->
<script>
    layui.use(['form','laydate','element','layer'], function () {
        var form = layui.form, laydate = layui.laydate, element = layui.element, layer = layui.layer;
        laydate.render({
            elem:'#dateStr'
            ,range: '~'
            ,value: dateStr(90)
            ,trigger: 'click'
            ,theme: 'molv'
            ,done: function (value, date, endDate) {
                dateVal = value;
            }
        });
    });
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));
    myChart.showLoading();
    // 指定图表的配置项和数据
    var option = {
        title: {
            text: '车系Top20',
            x:'center'
        },
        tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend:{
            type:'scroll',
            orient: 'vertical',
            right: 20,
            top: 20,
            bottom: 20,
            data: ['语言','美国数学','美国科学&社会科学','呆']
        },
        series: [{
            name: '车系Top20',
            type: 'pie',
            clockwise:'true',
            startAngle:'0',
            radius : ['20%','60%'],
            center: ['40%', '50%'],
            data: [{
                value:70,
                name:'语言'
            },{
                value:10,
                name:'美国科学&社会科学'
            },{
                value:20,
                name:'美国数学'
            }],
            itemStyle: {
                emphasis: {
                    shadowBlur: 10,
                    shadowOffsetX: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        }]
    };
    myChart.hideLoading();
    carSys();
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
    function carSys() {
        $.ajax({
            url:"${base}/car/dataStatistics/carSys",
            dataType:"json",
            type:"post",
            success:function (result) {

            }
        });
    }
</script>
<#include "/common/bodyEnd.html">